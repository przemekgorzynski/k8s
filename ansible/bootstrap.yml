---
- name: K8s bootstrap
  hosts: master
  gather_facts: true
  become: true
  become_method: sudo

  pre_tasks:
    - name: Check connectivity
      action: ansible.builtin.ping
      tags:
        - pre
        - always

  tasks:
    - name: Import APT packager manager tasks
      ansible.builtin.import_tasks:
        file: tasks/apt.yml
      tags:
        - apt
    - name: Import container runtime tasks
      ansible.builtin.import_tasks:
        file: tasks/container_runtime.yml
      tags:
        - container_runtime
    - name: Import prerequisites tasks
      ansible.builtin.import_tasks:
        file: tasks/prerequisites.yml
      tags:
        - prerequisites

